
# WordPressのバックアップの手順

2016/01/06 記述  
VPSのアーキテクチャ構造を変更するため、Wordpressのバックアップ手順の備忘録。
余計なプラグインなどは使わず純粋にWordPressの機能にみを使用して行った。
定石ではプラグインとかテーマはFTPでファイル持ってきてバックアップとるっぽいけど、
そこは興味ない人なので、今回は割愛。


## Agenda

新たな環境に移行したい内容は設定、プラグイン、テーマ、記事の内容である。
作業内容を以下に示す。

 1. データベースから記事をXML形式でエクスポート
 1. プラグイン、テーマを書き出す
 1. 設定をメモに書き出す


## データベースから記事をXML形式でエクスポート

これは超簡単。Wordpressの力を借りて1分で終わらせる。
ダッシュボードのツールタブからExportを選択[すべてのコンテンツ]を選択して[エクスポートをダウンロード]
をクリックすれば、データベースからコンテンツをXML形式で吐いてくれる。あとはそれに適当に名前でもつけとく。



## プラグイン、テーマを書き出す

使用しているプラグイン、テーマを以下に示す。

### プラグイン

 - Crayon Syntax Highlighter シンタックスハイライター(SyntaxHighlighter Evolvedに移行したい)
 - Jetpack by WordPress.com  アクセス解析とかやる万能なやつ
 - Nginx Cache Controller    Nginxのリバースプロキシ用のキャッシュコントローラ
 - What's New Generator      最近の記事を簡単に表示してくれる神のようなプラグイン
 - WP-Markdown               投稿や固定ページをMarkdownでかけるやつ


### テーマ

  - Reverie   libpgen.orgやslankdev.netで使ってるクールなやつ
  - habakiri  なんか人気が高いけどまだ使ってない


## 設定をメモに書き出す

Wordpressの各種設定をメモに取り、あとで新たな環境で設定し直す。
メモにとる内容を以下に示す。今回はメモった内容を端折らず全部まとめた！

 1. 設定タブの内容
	1. 一般
		1. サイトのタイトル
		1. キャッチフレーズ
		1. メールアドレス
	1. 表示設定
		1. フロントページの表示 
		1. 1ページに表示する最大投稿数 10項目
		1. 関連記にを表示する設定を有効
	1. パーマリンク設定(これを間違えると記事が表示されなかったりする)
		1. 共通設定は[日付と投稿名]を選択

 1. プラグインやテーマごとの設定
 	1. Crayon Syntax Highlighter
		1. テーマをGithubに変更
		1. ツールバーを表示しない
	1. What's New Generator
		1. タイトルを[新着情報]にする
		1. 表示するコンテンツは[投稿]
		1. 表示件数 10個
		1. これ以外になんかCSSとかいじった気がするけどよく覚えてない。(見た目だけ)
	1. テーマの設定
		1. Primary Navigation は head-menuを指定

 1. その他の設定
 	1. ヘッダー画像を設定する　この辺はよくわかってない。(cssを編集するだけ)










# WordPressのコンテンツ復元の手順

2016/01/06 記述  
バックアップした内容の復元方法

## Agenda 

やる内容を示す。
 
 1. 初期状態である記事やコメントを消去する
 1. 記事をXML ファイルからインポート
 1. プラグイン、テーマのインストール
 1. 各種設定


## 初期状態である記事やコメントを消去する

以下の項目をゴミ箱に移動しとく。邪魔なので

 - 固定ページのサンプル
 - 投稿のHello world!


## 記事をXML ファイルからインポート

1分で終わらせる。ツールタブの[インポート]からWordPressを選択
WordPressインポートツールプラグインをインストールして、有効化してインポートを実行。
あらかじめバックアップを取ったXMLファイルをしてしてコンテンツをインポートする。

このとき[添付ファイルをダウンロードしてインポートする]を選択しとく
これで記事に挿入した画像とかをダウンロードして持ってきてくれる

インポートに失敗したりして、何回もインポートしなおすと、記事とかメニューの項目がダブったりするので、
変だったら最初からやり直す。


## プラグイン、テーマのインストール

先ほどと同じ手順でプラグイン、テーマをインストールする。


## 各種設定

先ほどと同じ手順で各種設定をする。





